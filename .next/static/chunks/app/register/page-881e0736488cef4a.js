(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6437:function(e,r,t){Promise.resolve().then(t.bind(t,2235))},2235:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Dashboard}});var i=t(7437),o=t(5691),l=t(9701),a=t(1865),n=t(2265),s=t(2452),d=t(5848),u=t(2262);let m={position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1500},p={zIndex:1400};var Loading=e=>{let{message:r}=e;return(0,i.jsx)(u.Z,{open:!0,style:p,children:(0,i.jsxs)("div",{style:m,children:[(0,i.jsx)(s.Z,{color:"primary"}),r&&(0,i.jsx)(d.Z,{color:"white",variant:"h6",children:r})]})})},c=t(7488),h=t(8676),x=t(6131);function Dashboard(){var e,r,t,s,u,m;let[p,f]=(0,n.useState)(""),v={name:o.Z_().required("Full name is required"),email:o.Z_().required("Email is required").email("Invalid email format"),phone:o.Z_().required("A Mobile number is required"),role:o.Z_().required("Role is required"),description:o.Z_().required("Description is required"),extra:o.Z_(),photo:o.nK().required("Required")},{register:b,control:y,handleSubmit:g,formState:{errors:j,touchedFields:Z},reset:q}=(0,a.cI)({resolver:(0,l.X)(o.Ry().shape(v))});async function onSubmit(e){if(f("Registering..."),e.photo[0]){let r=e.photo[0],t=new FileReader;t.onload=r=>{if(r.target){let t=r.target.result,i={...e,photo:t};sendRegistrationData(i)}},t.readAsDataURL(r)}}async function sendRegistrationData(e){console.log("data",e);let r=await fetch("/api/users",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),t=await r.json();console.log("json",t),r.ok?(alert("User registered successfully"),q()):(console.error("error",t),alert("Error: Could not register user")),f("")}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{component:"h1",variant:"h5",sx:{marginBottom:2},children:"Registration"}),(0,i.jsxs)("form",{onSubmit:g(onSubmit),encType:"multipart/form-data",children:[(0,i.jsx)(c.Z,{id:"name",type:"text",variant:"outlined",color:"primary",label:"Full Name (Firstname and Lastname)",fullWidth:!0,...b("name"),error:Z.name&&!!j.name,helperText:Z.name?null===(e=j.name)||void 0===e?void 0:e.message:"",sx:{mb:2}}),(0,i.jsx)(c.Z,{type:"email",variant:"outlined",color:"primary",label:"Email",...b("email"),error:Z.email&&!!j.email,helperText:Z.email?null===(r=j.email)||void 0===r?void 0:r.message:"",fullWidth:!0,sx:{mb:2}}),(0,i.jsx)(a.Qr,{name:"phone",control:y,rules:{validate:e=>(console.log("value",e),(0,x.Cs)(e)||"Invalid mobile number")},render:e=>{var r;let{field:{ref:t,...o}}=e;return(0,i.jsx)(x.Kr,{disableDropdown:!0,inputRef:t,inputProps:{readOnly:!1},...o,color:"primary",defaultCountry:"US",variant:"outlined",label:"Mobile Number",error:!!j.phone,helperText:null===(r=j.phone)||void 0===r?void 0:r.message,fullWidth:!0,sx:{mb:2}})}}),(0,i.jsx)(c.Z,{type:"text",variant:"outlined",color:"primary",label:"Role",...b("role"),error:Z.role&&!!j.role,helperText:Z.role?null===(t=j.role)||void 0===t?void 0:t.message:"",fullWidth:!0,sx:{mb:2}}),(0,i.jsx)(c.Z,{type:"text",variant:"outlined",color:"primary",label:"Description",...b("description"),error:Z.description&&!!j.description,helperText:Z.description?null===(s=j.description)||void 0===s?void 0:s.message:"",fullWidth:!0,sx:{mb:2}}),(0,i.jsx)(c.Z,{type:"text",variant:"outlined",color:"primary",label:"Extra",...b("extra"),error:Z.extra&&!!j.extra,helperText:Z.extra?null===(u=j.extra)||void 0===u?void 0:u.message:"",fullWidth:!0,sx:{mb:2}}),(0,i.jsx)(c.Z,{type:"file",variant:"outlined",color:"primary",label:"Photo",...b("photo"),error:Z.photo&&!!j.photo,helperText:Z.photo?null===(m=j.photo)||void 0===m?void 0:m.message:"",fullWidth:!0,sx:{mb:2}}),(0,i.jsx)(h.Z,{variant:"contained",color:"primary",type:"submit",children:"Register"})]}),p&&(0,i.jsx)(Loading,{message:p})]})}}},function(e){e.O(0,[106,728,836,722,367,971,68,744],function(){return e(e.s=6437)}),_N_E=e.O()}]);